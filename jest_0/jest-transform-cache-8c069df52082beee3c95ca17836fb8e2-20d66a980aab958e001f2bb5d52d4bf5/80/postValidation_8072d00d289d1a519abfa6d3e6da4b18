8ed6ea0f4bd8c4e2c5c897b0ea992412
/* istanbul ignore next */'use strict';Object.defineProperty(exports, "__esModule", { value: true });exports.schemas = exports.validateBody = undefined;var cov_1h6bank9sm = function () {var path = '/app/src/api/validation/postValidation.js',hash = 'bef68ad6e8852fc435245a6a6e8275adf33a3b5e',global = new Function('return this')(),gcv = '__coverage__',coverageData = { path: '/app/src/api/validation/postValidation.js', statementMap: { '0': { start: { line: 4, column: 28 }, end: { line: 20, column: 1 } }, '1': { start: { line: 5, column: 4 }, end: { line: 19, column: 6 } }, '2': { start: { line: 6, column: 23 }, end: { line: 6, column: 53 } }, '3': { start: { line: 8, column: 8 }, end: { line: 10, column: 9 } }, '4': { start: { line: 9, column: 12 }, end: { line: 9, column: 54 } }, '5': { start: { line: 12, column: 8 }, end: { line: 14, column: 9 } }, '6': { start: { line: 13, column: 12 }, end: { line: 13, column: 27 } }, '7': { start: { line: 16, column: 8 }, end: { line: 16, column: 41 } }, '8': { start: { line: 18, column: 8 }, end: { line: 18, column: 15 } }, '9': { start: { line: 22, column: 23 }, end: { line: 32, column: 1 } } }, fnMap: { '0': { name: '(anonymous_0)', decl: { start: { line: 4, column: 28 }, end: { line: 4, column: 29 } }, loc: { start: { line: 4, column: 38 }, end: { line: 20, column: 1 } }, line: 4 }, '1': { name: '(anonymous_1)', decl: { start: { line: 5, column: 11 }, end: { line: 5, column: 12 } }, loc: { start: { line: 5, column: 31 }, end: { line: 19, column: 5 } }, line: 5 } }, branchMap: { '0': { loc: { start: { line: 8, column: 8 }, end: { line: 10, column: 9 } }, type: 'if', locations: [{ start: { line: 8, column: 8 }, end: { line: 10, column: 9 } }, { start: { line: 8, column: 8 }, end: { line: 10, column: 9 } }], line: 8 }, '1': { loc: { start: { line: 12, column: 8 }, end: { line: 14, column: 9 } }, type: 'if', locations: [{ start: { line: 12, column: 8 }, end: { line: 14, column: 9 } }, { start: { line: 12, column: 8 }, end: { line: 14, column: 9 } }], line: 12 } }, s: { '0': 0, '1': 0, '2': 0, '3': 0, '4': 0, '5': 0, '6': 0, '7': 0, '8': 0, '9': 0 }, f: { '0': 0, '1': 0 }, b: { '0': [0, 0], '1': [0, 0] }, _coverageSchema: '332fd63041d2c1bcb487cc26dd0d5f7d97098a6c' },coverage = global[gcv] || (global[gcv] = {});if (coverage[path] && coverage[path].hash === hash) {return coverage[path];}coverageData.hash = hash;return coverage[path] = coverageData;}();var /* istanbul ignore next */_joi = require('joi'); /* istanbul ignore next */var _joi2 = _interopRequireDefault(_joi);
var /* istanbul ignore next */_constants = require('../constants'); /* istanbul ignore next */var conf = _interopRequireWildcard(_constants); /* istanbul ignore next */function _interopRequireWildcard(obj) {if (obj && obj.__esModule) {return obj;} else {var newObj = {};if (obj != null) {for (var key in obj) {if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key];}}newObj.default = obj;return newObj;}}function _interopRequireDefault(obj) {return obj && obj.__esModule ? obj : { default: obj };}cov_1h6bank9sm.s[0]++;

const validateBody = /* istanbul ignore next */exports.validateBody = schema => {/* istanbul ignore next */cov_1h6bank9sm.f[0]++;cov_1h6bank9sm.s[1]++;
    return (req, res, next) => {/* istanbul ignore next */cov_1h6bank9sm.f[1]++;
        const result = /* istanbul ignore next */(cov_1h6bank9sm.s[2]++, /* istanbul ignore next */_joi2.default.validate(req.body, schema)); /* istanbul ignore next */cov_1h6bank9sm.s[3]++;

        if (result.error) {/* istanbul ignore next */cov_1h6bank9sm.b[0][0]++;cov_1h6bank9sm.s[4]++;
            return res.status(400).json(result.error);
        } else /* istanbul ignore next */{cov_1h6bank9sm.b[0][1]++;}cov_1h6bank9sm.s[5]++;

        if (!req.value) {/* istanbul ignore next */cov_1h6bank9sm.b[1][0]++;cov_1h6bank9sm.s[6]++;
            req.value = {};
        } else /* istanbul ignore next */{cov_1h6bank9sm.b[1][1]++;}cov_1h6bank9sm.s[7]++;

        req.value['body'] = result.value; /* istanbul ignore next */cov_1h6bank9sm.s[8]++;

        next();
    };
};

const schemas = /* istanbul ignore next */exports.schemas = (cov_1h6bank9sm.s[9]++, {
    signInSchema: /* istanbul ignore next */_joi2.default.object().keys({
        username: /* istanbul ignore next */_joi2.default.string().min(conf.USERNAME_MIN_LENGTH).max(conf.USERNAME_MAX_LENGTH).required(),
        password: /* istanbul ignore next */_joi2.default.string().required() }),

    signUpSchema: /* istanbul ignore next */_joi2.default.object().keys({
        email: /* istanbul ignore next */_joi2.default.string().email().min(conf.EMAIL_MIN_LENGTH).max(conf.EMAIL_MAX_LENGTH).required(),
        username: /* istanbul ignore next */_joi2.default.string().min(conf.USERNAME_MIN_LENGTH).max(conf.USERNAME_MAX_LENGTH).required(),
        password: /* istanbul ignore next */_joi2.default.string().required() }) });
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBvc3RWYWxpZGF0aW9uLmpzIl0sIm5hbWVzIjpbImNvbmYiLCJ2YWxpZGF0ZUJvZHkiLCJzY2hlbWEiLCJyZXEiLCJyZXMiLCJuZXh0IiwicmVzdWx0IiwidmFsaWRhdGUiLCJib2R5IiwiZXJyb3IiLCJzdGF0dXMiLCJqc29uIiwidmFsdWUiLCJzY2hlbWFzIiwic2lnbkluU2NoZW1hIiwib2JqZWN0Iiwia2V5cyIsInVzZXJuYW1lIiwic3RyaW5nIiwibWluIiwiVVNFUk5BTUVfTUlOX0xFTkdUSCIsIm1heCIsIlVTRVJOQU1FX01BWF9MRU5HVEgiLCJyZXF1aXJlZCIsInBhc3N3b3JkIiwic2lnblVwU2NoZW1hIiwiZW1haWwiLCJFTUFJTF9NSU5fTEVOR1RIIiwiRU1BSUxfTUFYX0xFTkdUSCJdLCJtYXBwaW5ncyI6IjAzRUFBQSxvRDtBQUNBLG1FLCtCQUFZQSxJOztBQUVMLE1BQU1DLGdFQUFlQyxVQUFVO0FBQ2xDLFdBQU8sQ0FBQ0MsR0FBRCxFQUFNQyxHQUFOLEVBQVdDLElBQVgsS0FBb0I7QUFDdkIsY0FBTUMsMkRBQVMsd0NBQUlDLFFBQUosQ0FBYUosSUFBSUssSUFBakIsRUFBdUJOLE1BQXZCLENBQVQsQ0FBTixDQUR1Qjs7QUFHdkIsWUFBSUksT0FBT0csS0FBWCxFQUFrQjtBQUNkLG1CQUFPTCxJQUFJTSxNQUFKLENBQVcsR0FBWCxFQUFnQkMsSUFBaEIsQ0FBcUJMLE9BQU9HLEtBQTVCLENBQVA7QUFDSCxTQUZELDJEQUh1Qjs7QUFPdkIsWUFBSSxDQUFDTixJQUFJUyxLQUFULEVBQWdCO0FBQ1pULGdCQUFJUyxLQUFKLEdBQVksRUFBWjtBQUNILFNBRkQsMkRBUHVCOztBQVd2QlQsWUFBSVMsS0FBSixDQUFVLE1BQVYsSUFBb0JOLE9BQU9NLEtBQTNCLENBWHVCOztBQWF2QlA7QUFDSCxLQWREO0FBZUgsQ0FoQk07O0FBa0JBLE1BQU1RLDhFQUFVO0FBQ25CQyxrQkFBYyx3Q0FBSUMsTUFBSixHQUFhQyxJQUFiLENBQWtCO0FBQzVCQyxrQkFBVSx3Q0FBSUMsTUFBSixHQUFhQyxHQUFiLENBQWlCbkIsS0FBS29CLG1CQUF0QixFQUEyQ0MsR0FBM0MsQ0FBK0NyQixLQUFLc0IsbUJBQXBELEVBQXlFQyxRQUF6RSxFQURrQjtBQUU1QkMsa0JBQVUsd0NBQUlOLE1BQUosR0FBYUssUUFBYixFQUZrQixFQUFsQixDQURLOztBQUtuQkUsa0JBQWMsd0NBQUlWLE1BQUosR0FBYUMsSUFBYixDQUFrQjtBQUM1QlUsZUFBTyx3Q0FBSVIsTUFBSixHQUFhUSxLQUFiLEdBQXFCUCxHQUFyQixDQUF5Qm5CLEtBQUsyQixnQkFBOUIsRUFBZ0ROLEdBQWhELENBQW9EckIsS0FBSzRCLGdCQUF6RCxFQUEyRUwsUUFBM0UsRUFEcUI7QUFFNUJOLGtCQUFVLHdDQUFJQyxNQUFKLEdBQWFDLEdBQWIsQ0FBaUJuQixLQUFLb0IsbUJBQXRCLEVBQTJDQyxHQUEzQyxDQUErQ3JCLEtBQUtzQixtQkFBcEQsRUFBeUVDLFFBQXpFLEVBRmtCO0FBRzVCQyxrQkFBVSx3Q0FBSU4sTUFBSixHQUFhSyxRQUFiLEVBSGtCLEVBQWxCLENBTEssRUFBVixDQUFOIiwiZmlsZSI6InBvc3RWYWxpZGF0aW9uLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEpvaSBmcm9tICdqb2knO1xuaW1wb3J0ICogYXMgY29uZiBmcm9tICcuLi9jb25zdGFudHMnO1xuXG5leHBvcnQgY29uc3QgdmFsaWRhdGVCb2R5ID0gc2NoZW1hID0+IHtcbiAgICByZXR1cm4gKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IEpvaS52YWxpZGF0ZShyZXEuYm9keSwgc2NoZW1hKTtcblxuICAgICAgICBpZiAocmVzdWx0LmVycm9yKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24ocmVzdWx0LmVycm9yKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghcmVxLnZhbHVlKSB7XG4gICAgICAgICAgICByZXEudmFsdWUgPSB7fTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJlcS52YWx1ZVsnYm9keSddID0gcmVzdWx0LnZhbHVlO1xuXG4gICAgICAgIG5leHQoKTtcbiAgICB9O1xufTtcblxuZXhwb3J0IGNvbnN0IHNjaGVtYXMgPSB7XG4gICAgc2lnbkluU2NoZW1hOiBKb2kub2JqZWN0KCkua2V5cyh7XG4gICAgICAgIHVzZXJuYW1lOiBKb2kuc3RyaW5nKCkubWluKGNvbmYuVVNFUk5BTUVfTUlOX0xFTkdUSCkubWF4KGNvbmYuVVNFUk5BTUVfTUFYX0xFTkdUSCkucmVxdWlyZWQoKSxcbiAgICAgICAgcGFzc3dvcmQ6IEpvaS5zdHJpbmcoKS5yZXF1aXJlZCgpXG4gICAgfSksXG4gICAgc2lnblVwU2NoZW1hOiBKb2kub2JqZWN0KCkua2V5cyh7XG4gICAgICAgIGVtYWlsOiBKb2kuc3RyaW5nKCkuZW1haWwoKS5taW4oY29uZi5FTUFJTF9NSU5fTEVOR1RIKS5tYXgoY29uZi5FTUFJTF9NQVhfTEVOR1RIKS5yZXF1aXJlZCgpLFxuICAgICAgICB1c2VybmFtZTogSm9pLnN0cmluZygpLm1pbihjb25mLlVTRVJOQU1FX01JTl9MRU5HVEgpLm1heChjb25mLlVTRVJOQU1FX01BWF9MRU5HVEgpLnJlcXVpcmVkKCksXG4gICAgICAgIHBhc3N3b3JkOiBKb2kuc3RyaW5nKCkucmVxdWlyZWQoKSxcbiAgICB9KVxufTtcbiJdfQ==